(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6101],{2897:(e,s,i)=>{"use strict";i.d(s,{default:()=>P});var l=i(95155),t=i(72752),a=i(27467),n=i(34477);let r=(0,n.createServerReference)("60a2565f91653c572be0ac14a16eea3103fb4a29e3",n.callServer,void 0,n.findSourceMapURL,"initiatePaymentSession");var d=i(36873),o=i(18690),c=i(43184),u=i(33881),m=i(24084),p=i(54630),h=i(53592),v=i(79010),x=i(12115),g=i(47698);let b=()=>(0,l.jsxs)("div",{className:"flex flex-col gap-1 my-4 transition-all duration-150 ease-in-out",children:[(0,l.jsx)("div",{className:"h-4 bg-ui-bg-component-pressed rounded-md w-1/4 animate-pulse mb-1"}),(0,l.jsx)("div",{className:"pt-3 pb-1 block w-full h-11 px-4 mt-0 bg-ui-bg-field border rounded-md appearance-none border-ui-border-base animate-pulse"})]});var f=i(55855),_=i(14272),j=i(32307);let y=e=>{var s,i;let{paymentProviderId:n,selectedPaymentOptionId:r,paymentInfoMap:d,disabled:o=!1,children:c}=e;return(0,l.jsxs)(t.sx,{value:n,disabled:o,className:(0,u.E)("flex flex-col gap-y-2 text-small-regular cursor-pointer py-4 border rounded-rounded px-8 mb-2 hover:shadow-borders-interactive-with-active",{"border-ui-border-interactive":r===n}),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between ",children:[(0,l.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,l.jsx)(g.A,{checked:r===n}),(0,l.jsx)(m.E,{className:"text-base-regular",children:(null==(s=d[n])?void 0:s.title)||n}),(0,a.b0)(n)&&!1]}),(0,l.jsx)("span",{className:"justify-self-end text-ui-fg-base",children:null==(i=d[n])?void 0:i.icon})]}),(0,a.b0)(n)&&!1,c]},n)},N=e=>{let{paymentProviderId:s,selectedPaymentOptionId:i,paymentInfoMap:t,disabled:a=!1,setCardBrand:n,setError:r,setCardComplete:d}=e,o=(0,x.useContext)(j.l),c=(0,x.useMemo)(()=>({style:{base:{fontFamily:"Inter, sans-serif",color:"#424270","::placeholder":{color:"rgb(107 114 128)"}}},classes:{base:"pt-3 pb-1 block w-full h-11 px-4 mt-0 bg-ui-bg-field border rounded-md appearance-none focus:outline-none focus:ring-0 focus:shadow-borders-interactive-with-active border-ui-border-base hover:bg-ui-bg-field-hover transition-all duration-300 ease-in-out"}}),[]);return(0,l.jsx)(y,{paymentProviderId:s,selectedPaymentOptionId:i,paymentInfoMap:t,disabled:a,children:i===s&&(o?(0,l.jsxs)("div",{className:"my-4 transition-all duration-150 ease-in-out",children:[(0,l.jsx)(m.E,{className:"txt-medium-plus text-ui-fg-base mb-1",children:"Enter your card details:"}),(0,l.jsx)(f.CardElement,{options:c,onChange:e=>{var s;n(e.brand&&e.brand.charAt(0).toUpperCase()+e.brand.slice(1)),r((null==(s=e.error)?void 0:s.message)||null),d(e.complete)}})]}):(0,l.jsx)(b,{}))})};var w=i(47732),C=i(35695);let P=e=>{var s,i,n,g,b,f;let{cart:_,availablePaymentMethods:j}=e,P=null==(i=_.payment_collection)||null==(s=i.payment_sessions)?void 0:s.find(e=>"pending"===e.status),[k,E]=(0,x.useState)(!1),[S,A]=(0,x.useState)(null),[z,L]=(0,x.useState)(null),[M,R]=(0,x.useState)(!1),[F,I]=(0,x.useState)(null!=(f=null==P?void 0:P.provider_id)?f:""),B=(0,C.useSearchParams)(),H=(0,C.useRouter)(),q=(0,C.usePathname)(),U="payment"===B.get("step"),O=(0,a.Ce)(F),W=async e=>{A(null),I(e),(0,a.Ce)(e)&&await r(_,{provider_id:e})},X=(null==_?void 0:_.gift_cards)&&(null==_||null==(n=_.gift_cards)?void 0:n.length)>0&&(null==_?void 0:_.total)===0,$=P&&(null==_?void 0:_.shipping_methods.length)!==0||X,D=(0,x.useCallback)((e,s)=>{let i=new URLSearchParams(B);return i.set(e,s),i.toString()},[B]),T=async()=>{E(!0);try{let e=(0,a.Ce)(F)&&!P;if((null==P?void 0:P.provider_id)!==F&&await r(_,{provider_id:F}),!e)return H.push(q+"?"+D("step","review"),{scroll:!1})}catch(e){A(e.message)}finally{E(!1)}};return(0,x.useEffect)(()=>{A(null)},[U]),(0,l.jsxs)("div",{className:"bg-white",children:[(0,l.jsxs)("div",{className:"flex flex-row items-center justify-between mb-6",children:[(0,l.jsxs)(c.D,{level:"h2",className:(0,u.E)("flex flex-row text-3xl-regular gap-x-2 items-baseline",{"opacity-50 pointer-events-none select-none":!U&&!$}),children:["Payment",!U&&$&&(0,l.jsx)(d.A,{})]}),!U&&$&&(0,l.jsx)(m.E,{children:(0,l.jsx)("button",{onClick:()=>{H.push(q+"?"+D("step","payment"),{scroll:!1})},className:"text-ui-fg-interactive hover:text-ui-fg-interactive-hover","data-testid":"edit-payment-button",children:"Edit"})})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:U?"block":"hidden",children:[!X&&(null==j?void 0:j.length)&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(t.z6,{value:F,onChange:e=>W(e),children:j.map(e=>(0,l.jsx)("div",{children:(0,a.Ce)(e.id)?(0,l.jsx)(N,{paymentProviderId:e.id,selectedPaymentOptionId:F,paymentInfoMap:a.l2,setCardBrand:L,setError:A,setCardComplete:R}):(0,l.jsx)(y,{paymentInfoMap:a.l2,paymentProviderId:e.id,selectedPaymentOptionId:F})},e.id))})}),X&&(0,l.jsxs)("div",{className:"flex flex-col w-1/3",children:[(0,l.jsx)(m.E,{className:"txt-medium-plus text-ui-fg-base mb-1",children:"Payment method"}),(0,l.jsx)(m.E,{className:"txt-medium text-ui-fg-subtle","data-testid":"payment-method-summary",children:"Gift card"})]}),(0,l.jsx)(v.A,{error:S,"data-testid":"payment-method-error-message"}),(0,l.jsx)(p.$,{size:"large",className:"mt-6",onClick:T,isLoading:k,disabled:O&&!M||!F&&!X,"data-testid":"submit-payment-button",children:!P&&(0,a.Ce)(F)?" Enter card details":"Continue to review"})]}),(0,l.jsx)("div",{className:U?"hidden":"block",children:_&&$&&P?(0,l.jsxs)("div",{className:"flex items-start gap-x-1 w-full",children:[(0,l.jsxs)("div",{className:"flex flex-col w-1/3",children:[(0,l.jsx)(m.E,{className:"txt-medium-plus text-ui-fg-base mb-1",children:"Payment method"}),(0,l.jsx)(m.E,{className:"txt-medium text-ui-fg-subtle","data-testid":"payment-method-summary",children:(null==(g=a.l2[null==P?void 0:P.provider_id])?void 0:g.title)||(null==P?void 0:P.provider_id)})]}),(0,l.jsxs)("div",{className:"flex flex-col w-1/3",children:[(0,l.jsx)(m.E,{className:"txt-medium-plus text-ui-fg-base mb-1",children:"Payment details"}),(0,l.jsxs)("div",{className:"flex gap-2 txt-medium text-ui-fg-subtle items-center","data-testid":"payment-details-summary",children:[(0,l.jsx)(h.m,{className:"flex items-center h-7 w-fit p-2 bg-ui-button-neutral-hover",children:(null==(b=a.l2[F])?void 0:b.icon)||(0,l.jsx)(o.A,{})}),(0,l.jsx)(m.E,{children:(0,a.Ce)(F)&&z?z:"Another step will appear"})]})]})]}):X?(0,l.jsxs)("div",{className:"flex flex-col w-1/3",children:[(0,l.jsx)(m.E,{className:"txt-medium-plus text-ui-fg-base mb-1",children:"Payment method"}),(0,l.jsx)(m.E,{className:"txt-medium text-ui-fg-subtle","data-testid":"payment-method-summary",children:"Gift card"})]}):null})]}),(0,l.jsx)(w.A,{className:"mt-8"})]})}},4530:(e,s,i)=>{"use strict";i.d(s,{default:()=>y});var l=i(95155),t=i(72752),a=i(34477);let n=(0,a.createServerReference)("40e8c4f8af5606f3821a9ab3b707a056c8a8c42ca6",a.callServer,void 0,a.findSourceMapURL,"setShippingMethod"),r=(0,a.createServerReference)("7fb6f1851146068ddd0abc666e31b450c269aeb4ae",a.callServer,void 0,a.findSourceMapURL,"calculatePriceForShippingOption");var d=i(71808),o=i(36873),c=i(50583),u=i(43184),m=i(33881),p=i(24084),h=i(54630),v=i(79010),x=i(47732),g=i(47698),b=i(35695),f=i(12115);let _="__PICKUP_ON",j="__PICKUP_OFF",y=e=>{var s,i,a,y,N,w,C,P,k,E,S;let{cart:A,availableShippingMethods:z}=e,[L,M]=(0,f.useState)(!1),[R,F]=(0,f.useState)(!0),[I,B]=(0,f.useState)(j),[H,q]=(0,f.useState)({}),[U,O]=(0,f.useState)(null),[W,X]=(0,f.useState)((null==(i=A.shipping_methods)||null==(s=i.at(-1))?void 0:s.shipping_option_id)||null),$=(0,b.useSearchParams)(),D=(0,b.useRouter)(),T=(0,b.usePathname)(),V="delivery"===$.get("step"),K=null==z?void 0:z.filter(e=>{var s,i;return(null==(i=e.service_zone)||null==(s=i.fulfillment_set)?void 0:s.type)!=="pickup"}),Z=null==z?void 0:z.filter(e=>{var s,i;return(null==(i=e.service_zone)||null==(s=i.fulfillment_set)?void 0:s.type)==="pickup"}),G=!!(null==Z?void 0:Z.length);(0,f.useEffect)(()=>{if(F(!0),null==K?void 0:K.length){let e=K.filter(e=>"calculated"===e.price_type).map(e=>r(e.id,A.id));e.length&&Promise.allSettled(e).then(e=>{let s={};e.filter(e=>"fulfilled"===e.status).forEach(e=>{var i,l;return s[(null==(i=e.value)?void 0:i.id)||""]=null==(l=e.value)?void 0:l.amount}),q(s),F(!1)})}(null==Z?void 0:Z.find(e=>e.id===W))&&B(_)},[z]);let Y=async(e,s)=>{O(null),"pickup"===s?B(_):B(j);let i=null;M(!0),X(s=>(i=s,e)),await n({cartId:A.id,shippingMethodId:e}).catch(e=>{X(i),O(e.message)}).finally(()=>{M(!1)})};return(0,f.useEffect)(()=>{O(null)},[V]),(0,l.jsxs)("div",{className:"bg-white",children:[(0,l.jsxs)("div",{className:"flex flex-row items-center justify-between mb-6",children:[(0,l.jsxs)(u.D,{level:"h2",className:(0,m.E)("flex flex-row text-3xl-regular gap-x-2 items-baseline",{"opacity-50 pointer-events-none select-none":!V&&(null==(a=A.shipping_methods)?void 0:a.length)===0}),children:["Delivery",!V&&(null!=(E=null==(y=A.shipping_methods)?void 0:y.length)?E:0)>0&&(0,l.jsx)(o.A,{})]}),!V&&(null==A?void 0:A.shipping_address)&&(null==A?void 0:A.billing_address)&&(null==A?void 0:A.email)&&(0,l.jsx)(p.E,{children:(0,l.jsx)("button",{onClick:()=>{D.push(T+"?step=delivery",{scroll:!1})},className:"text-ui-fg-interactive hover:text-ui-fg-interactive-hover","data-testid":"edit-delivery-button",children:"Edit"})})]}),V?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"grid",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{className:"font-medium txt-medium text-ui-fg-base",children:"Shipping method"}),(0,l.jsx)("span",{className:"mb-4 text-ui-fg-muted txt-medium",children:"How would you like you order delivered"})]}),(0,l.jsx)("div",{"data-testid":"delivery-options-container",children:(0,l.jsxs)("div",{className:"pb-8 md:pt-0 pt-2",children:[G&&(0,l.jsx)(t.z6,{value:I,onChange:e=>{var s;let i=null==(s=Z.find(e=>!e.insufficient_inventory))?void 0:s.id;i&&Y(i,"pickup")},children:(0,l.jsxs)(t.sx,{value:_,"data-testid":"delivery-option-radio",className:(0,m.E)("flex items-center justify-between text-small-regular cursor-pointer py-4 border rounded-rounded px-8 mb-2 hover:shadow-borders-interactive-with-active",{"border-ui-border-interactive":I===_}),children:[(0,l.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,l.jsx)(g.A,{checked:I===_}),(0,l.jsx)("span",{className:"text-base-regular",children:"Pick up your order"})]}),(0,l.jsx)("span",{className:"justify-self-end text-ui-fg-base",children:"-"})]})}),(0,l.jsx)(t.z6,{value:W,onChange:e=>Y(e,"shipping"),children:null==K?void 0:K.map(e=>{let s="calculated"===e.price_type&&!R&&"number"!=typeof H[e.id];return(0,l.jsxs)(t.sx,{value:e.id,"data-testid":"delivery-option-radio",disabled:s,className:(0,m.E)("flex items-center justify-between text-small-regular cursor-pointer py-4 border rounded-rounded px-8 mb-2 hover:shadow-borders-interactive-with-active",{"border-ui-border-interactive":e.id===W,"hover:shadow-brders-none cursor-not-allowed":s}),children:[(0,l.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,l.jsx)(g.A,{checked:e.id===W}),(0,l.jsx)("span",{className:"text-base-regular",children:e.name})]}),(0,l.jsx)("span",{className:"justify-self-end text-ui-fg-base",children:"flat"===e.price_type?(0,d.$)({amount:e.amount,currency_code:null==A?void 0:A.currency_code}):H[e.id]?(0,d.$)({amount:H[e.id],currency_code:null==A?void 0:A.currency_code}):R?(0,l.jsx)(c.A,{}):"-"})]},e.id)})})]})})]}),I===_&&(0,l.jsxs)("div",{className:"grid",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{className:"font-medium txt-medium text-ui-fg-base",children:"Store"}),(0,l.jsx)("span",{className:"mb-4 text-ui-fg-muted txt-medium",children:"Choose a store near you"})]}),(0,l.jsx)("div",{"data-testid":"delivery-options-container",children:(0,l.jsx)("div",{className:"pb-8 md:pt-0 pt-2",children:(0,l.jsx)(t.z6,{value:W,onChange:e=>Y(e,"pickup"),children:null==Z?void 0:Z.map(e=>{var s,i,a;return(0,l.jsxs)(t.sx,{value:e.id,disabled:e.insufficient_inventory,"data-testid":"delivery-option-radio",className:(0,m.E)("flex items-center justify-between text-small-regular cursor-pointer py-4 border rounded-rounded px-8 mb-2 hover:shadow-borders-interactive-with-active",{"border-ui-border-interactive":e.id===W,"hover:shadow-brders-none cursor-not-allowed":e.insufficient_inventory}),children:[(0,l.jsxs)("div",{className:"flex items-start gap-x-4",children:[(0,l.jsx)(g.A,{checked:e.id===W}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{className:"text-base-regular",children:e.name}),(0,l.jsx)("span",{className:"text-base-regular text-ui-fg-muted",children:function(e){if(!e)return"";let s="";return e.address_1&&(s+=" ".concat(e.address_1)),e.address_2&&(s+=", ".concat(e.address_2)),e.postal_code&&(s+=", ".concat(e.postal_code," ").concat(e.city)),e.country_code&&(s+=", ".concat(e.country_code.toUpperCase())),s}(null==(a=e.service_zone)||null==(i=a.fulfillment_set)||null==(s=i.location)?void 0:s.address)})]})]}),(0,l.jsx)("span",{className:"justify-self-end text-ui-fg-base",children:(0,d.$)({amount:e.amount,currency_code:null==A?void 0:A.currency_code})})]},e.id)})})})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(v.A,{error:U,"data-testid":"delivery-option-error-message"}),(0,l.jsx)(h.$,{size:"large",className:"mt",onClick:()=>{D.push(T+"?step=payment",{scroll:!1})},isLoading:L,disabled:!(null==(N=A.shipping_methods)?void 0:N[0]),"data-testid":"submit-delivery-option-button",children:"Continue to payment"})]})]}):(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"text-small-regular",children:A&&(null!=(S=null==(w=A.shipping_methods)?void 0:w.length)?S:0)>0&&(0,l.jsxs)("div",{className:"flex flex-col w-1/3",children:[(0,l.jsx)(p.E,{className:"txt-medium-plus text-ui-fg-base mb-1",children:"Method"}),(0,l.jsxs)(p.E,{className:"txt-medium text-ui-fg-subtle",children:[null==(P=A.shipping_methods)||null==(C=P.at(-1))?void 0:C.name," ",(0,d.$)({amount:null==(k=A.shipping_methods.at(-1))?void 0:k.amount,currency_code:null==A?void 0:A.currency_code})]})]})})}),(0,l.jsx)(x.A,{className:"mt-8"})]})}},7634:(e,s,i)=>{"use strict";i.d(s,{A:()=>o});var l=i(95155),t=i(43820),a=i(12115);let n=e=>{let{size:s="20",color:i="currentColor",...t}=e;return(0,l.jsxs)("svg",{width:s,height:s,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[(0,l.jsx)("path",{d:"M2.5 9.99992C2.5 9.99992 5.22727 4.58325 10 4.58325C14.7727 4.58325 17.5 9.99992 17.5 9.99992C17.5 9.99992 14.7727 15.4166 10 15.4166C5.22727 15.4166 2.5 9.99992 2.5 9.99992Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M9.99965 12.074C11.145 12.074 12.0735 11.1455 12.0735 10.0001C12.0735 8.85477 11.145 7.92627 9.99965 7.92627C8.85428 7.92627 7.92578 8.85477 7.92578 10.0001C7.92578 11.1455 8.85428 12.074 9.99965 12.074Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})},r=e=>{let{size:s="20",color:i="currentColor",...t}=e;return(0,l.jsxs)("svg",{width:s,height:s,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[(0,l.jsx)("path",{d:"M8.56818 4.70906C9.0375 4.59921 9.518 4.54429 10 4.54543C14.7727 4.54543 17.5 9.99997 17.5 9.99997C17.0861 10.7742 16.5925 11.5032 16.0273 12.175M11.4455 11.4454C11.2582 11.6464 11.0324 11.8076 10.7815 11.9194C10.5306 12.0312 10.2597 12.0913 9.98506 12.0961C9.71042 12.101 9.43761 12.0505 9.18292 11.9476C8.92822 11.8447 8.69686 11.6916 8.50262 11.4973C8.30839 11.3031 8.15527 11.0718 8.05239 10.8171C7.94952 10.5624 7.899 10.2896 7.90384 10.0149C7.90869 9.74027 7.9688 9.46941 8.0806 9.2185C8.19239 8.9676 8.35358 8.74178 8.55455 8.55452M14.05 14.05C12.8845 14.9384 11.4653 15.4306 10 15.4545C5.22727 15.4545 2.5 9.99997 2.5 9.99997C3.34811 8.41945 4.52441 7.03857 5.95 5.94997L14.05 14.05Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M2.5 2.5L17.5 17.5",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})},d=a.forwardRef((e,s)=>{let{type:i,name:d,label:o,touched:c,required:u,topLabel:m,...p}=e,h=a.useRef(null),[v,x]=(0,a.useState)(!1),[g,b]=(0,a.useState)(i);return(0,a.useEffect)(()=>{"password"===i&&v&&b("text"),"password"!==i||v||b("password")},[i,v]),(0,a.useImperativeHandle)(s,()=>h.current),(0,l.jsxs)("div",{className:"flex flex-col w-full",children:[m&&(0,l.jsx)(t.Label,{className:"mb-2 txt-compact-medium-plus",children:m}),(0,l.jsxs)("div",{className:"flex relative z-0 w-full txt-compact-medium",children:[(0,l.jsx)("input",{type:g,name:d,placeholder:" ",required:u,className:"pt-4 pb-1 block w-full h-11 px-4 mt-0 bg-ui-bg-field border rounded-md appearance-none focus:outline-none focus:ring-0 focus:shadow-borders-interactive-with-active border-ui-border-base hover:bg-ui-bg-field-hover",...p,ref:h}),(0,l.jsxs)("label",{htmlFor:d,onClick:()=>{var e;return null==(e=h.current)?void 0:e.focus()},className:"flex items-center justify-center mx-3 px-1 transition-all absolute duration-300 top-3 -z-1 origin-0 text-ui-fg-subtle",children:[o,u&&(0,l.jsx)("span",{className:"text-rose-500",children:"*"})]}),"password"===i&&(0,l.jsx)("button",{type:"button",onClick:()=>x(!v),className:"text-ui-fg-subtle px-4 focus:outline-none transition-all duration-150 outline-none focus:text-ui-fg-base absolute right-0 top-3",children:v?(0,l.jsx)(n,{}):(0,l.jsx)(r,{})})]})]})});d.displayName="Input";let o=d},17822:(e,s,i)=>{Promise.resolve().then(i.bind(i,89879)),Promise.resolve().then(i.bind(i,68245)),Promise.resolve().then(i.bind(i,40339)),Promise.resolve().then(i.bind(i,60128)),Promise.resolve().then(i.bind(i,53089)),Promise.resolve().then(i.bind(i,7186)),Promise.resolve().then(i.bind(i,78788)),Promise.resolve().then(i.bind(i,94847)),Promise.resolve().then(i.bind(i,21942)),Promise.resolve().then(i.bind(i,36540)),Promise.resolve().then(i.bind(i,93273)),Promise.resolve().then(i.bind(i,92560)),Promise.resolve().then(i.bind(i,62908)),Promise.resolve().then(i.bind(i,84104)),Promise.resolve().then(i.bind(i,74973)),Promise.resolve().then(i.bind(i,82668)),Promise.resolve().then(i.bind(i,12884)),Promise.resolve().then(i.bind(i,40090)),Promise.resolve().then(i.bind(i,43820)),Promise.resolve().then(i.bind(i,99970)),Promise.resolve().then(i.bind(i,46940)),Promise.resolve().then(i.bind(i,10198)),Promise.resolve().then(i.bind(i,75059)),Promise.resolve().then(i.bind(i,83078)),Promise.resolve().then(i.bind(i,72350)),Promise.resolve().then(i.bind(i,60486)),Promise.resolve().then(i.bind(i,25492)),Promise.resolve().then(i.bind(i,45104)),Promise.resolve().then(i.bind(i,22126)),Promise.resolve().then(i.bind(i,93290)),Promise.resolve().then(i.bind(i,8963)),Promise.resolve().then(i.bind(i,66270)),Promise.resolve().then(i.bind(i,5979)),Promise.resolve().then(i.bind(i,9233)),Promise.resolve().then(i.bind(i,16721)),Promise.resolve().then(i.bind(i,86713)),Promise.resolve().then(i.bind(i,36256)),Promise.resolve().then(i.bind(i,43509)),Promise.resolve().then(i.bind(i,24265)),Promise.resolve().then(i.bind(i,29384)),Promise.resolve().then(i.bind(i,30509)),Promise.resolve().then(i.bind(i,50264)),Promise.resolve().then(i.bind(i,962)),Promise.resolve().then(i.bind(i,15312)),Promise.resolve().then(i.bind(i,91660)),Promise.resolve().then(i.bind(i,42869)),Promise.resolve().then(i.bind(i,91130)),Promise.resolve().then(i.bind(i,26522)),Promise.resolve().then(i.bind(i,834)),Promise.resolve().then(i.bind(i,5176)),Promise.resolve().then(i.bind(i,59918)),Promise.resolve().then(i.bind(i,82638)),Promise.resolve().then(i.bind(i,58842)),Promise.resolve().then(i.bind(i,85231)),Promise.resolve().then(i.bind(i,27414)),Promise.resolve().then(i.bind(i,54531)),Promise.resolve().then(i.bind(i,5918)),Promise.resolve().then(i.bind(i,56671)),Promise.resolve().then(i.bind(i,24752)),Promise.resolve().then(i.bind(i,41710)),Promise.resolve().then(i.bind(i,49254)),Promise.resolve().then(i.bind(i,74718)),Promise.resolve().then(i.bind(i,2897)),Promise.resolve().then(i.bind(i,91995)),Promise.resolve().then(i.bind(i,4530)),Promise.resolve().then(i.bind(i,72545))},24752:(e,s,i)=>{"use strict";i.d(s,{default:()=>o});var l=i(95155),t=i(53753),a=i(33881),n=i(94539),r=i(72041),d=i(96554);let o=e=>{let{cart:s}=e,i=s.items,o=i&&i.length>4;return(0,l.jsx)("div",{className:(0,a.E)({"pl-[1px] overflow-y-scroll overflow-x-hidden no-scrollbar max-h-[420px]":o}),children:(0,l.jsx)(n.X,{children:(0,l.jsx)(n.X.Body,{"data-testid":"items-table",children:i?i.sort((e,s)=>{var i,l;return(null!=(i=e.created_at)?i:"")>(null!=(l=s.created_at)?l:"")?-1:1}).map(e=>(0,l.jsx)(r.default,{item:e,type:"preview",currencyCode:s.currency_code},e.id)):(0,t.A)(5).map(e=>(0,l.jsx)(d.A,{},e))})})})}},27467:(e,s,i)=>{"use strict";i.d(s,{b0:()=>r,Ce:()=>n,l2:()=>a});var l=i(95155);i(12115);var t=i(18690);let a={pp_stripe_stripe:{title:"Credit card",icon:(0,l.jsx)(t.A,{})},"pp_stripe-ideal_stripe":{title:"iDeal",icon:(0,l.jsx)(e=>{let{size:s="20",color:i="currentColor",...t}=e;return(0,l.jsxs)("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",role:"img",xmlns:"http://www.w3.org/2000/svg",fill:i,...t,children:[(0,l.jsx)("title",{children:"iDEAL icon"}),(0,l.jsx)("path",{d:"M.975 2.61v18.782h11.411c6.89 0 10.64-3.21 10.64-9.415 0-6.377-4.064-9.367-10.64-9.367H.975zm11.411-.975C22.491 1.635 24 8.115 24 11.977c0 6.7-4.124 10.39-11.614 10.39H0V1.635h12.386z M2.506 13.357h3.653v6.503H2.506z M6.602 10.082a2.27 2.27 0 1 1-4.54 0 2.27 2.27 0 0 1 4.54 0m1.396-1.057v2.12h.65c.45 0 .867-.13.867-1.077 0-.924-.463-1.043-.867-1.043h-.65zm10.85-1.054h1.053v3.174h1.56c-.428-5.758-4.958-7.002-9.074-7.002H7.999v3.83h.65c1.183 0 1.92.803 1.92 2.095 0 1.333-.719 2.129-1.92 2.129h-.65v7.665h4.388c6.692 0 9.021-3.107 9.103-7.665h-2.64V7.97zm-2.93 2.358h.76l-.348-1.195h-.063l-.35 1.195zm-1.643 1.87l1.274-4.228h1.497l1.274 4.227h-1.095l-.239-.818H15.61l-.24.818h-1.095zm-.505-1.054v1.052h-2.603V7.973h2.519v1.052h-1.467v.49h1.387v1.05H12.22v.58h1.55z"})]})},{})},"pp_stripe-bancontact_stripe":{title:"Bancontact",icon:(0,l.jsx)(e=>{let{size:s="20",color:i="currentColor",...t}=e;return(0,l.jsxs)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"img",xmlns:"http://www.w3.org/2000/svg",fill:i,...t,children:[(0,l.jsx)("title",{children:"Bancontact icon"}),(0,l.jsx)("path",{d:"M21.385 9.768h-7.074l-4.293 5.022H1.557L3.84 12.1H1.122C.505 12.1 0 12.616 0 13.25v2.428c0 .633.505 1.15 1.122 1.15h12.933c.617 0 1.46-.384 1.874-.854l1.956-2.225 3.469-3.946.031-.035zm-1.123 1.279l-.751.855.75-.855zm2.616-3.875H9.982c-.617 0-1.462.384-1.876.853l-5.49 6.208h7.047l4.368-5.02h8.424l-2.263 2.689h2.686c.617 0 1.122-.518 1.122-1.151V8.323c0-.633-.505-1.15-1.122-1.15zm-1.87 3.024l-.374.427-.1.114.474-.54z"})]})},{})},pp_paypal_paypal:{title:"PayPal",icon:(0,l.jsx)(()=>(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",width:"20",viewBox:"0 0 26 25",id:"paypalIcon",children:[(0,l.jsx)("path",{fill:"none",stroke:"#303c42",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M6.9 20.5H2c-.6 0-.5-.1-.5-.5s2.9-18 3-18.5.5-1 1-1h10c2.8 0 5 2.2 5 5h0c0 4.4-3.6 8-8 8H7.9"}),(0,l.jsx)("path",{fill:"none",stroke:"#303c42",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M7 23.5c-.3 0-.5-.2-.5-.5 0 0 0 0 0 0 0-.3 2.4-16 2.5-16.5s.3-1 1-1h7.5c2.8 0 5 2.2 5 5h0c0 3.9-3.1 7-7 7h-2l-1 6H7z"})]}),{})},pp_system_default:{title:"Manual Payment",icon:(0,l.jsx)(t.A,{})}},n=e=>null==e?void 0:e.startsWith("pp_stripe_"),r=e=>null==e?void 0:e.startsWith("pp_system_default")},32307:(e,s,i)=>{"use strict";i.d(s,{A:()=>n,l:()=>a});var l=i(95155),t=i(55855);let a=(0,i(12115).createContext)(!1),n=e=>{var s,i;let{paymentSession:n,stripeKey:r,stripePromise:d,children:o}=e,c={clientSecret:null==(s=n.data)?void 0:s.client_secret};if(!r)throw Error("Stripe key is missing. Set NEXT_PUBLIC_STRIPE_KEY environment variable.");if(!d)throw Error("Stripe promise is missing. Make sure you have provided a valid Stripe key.");if(!(null==n||null==(i=n.data)?void 0:i.client_secret))throw Error("Stripe client secret is missing. Cannot initialize Stripe.");return(0,l.jsx)(a.Provider,{value:!0,children:(0,l.jsx)(t.Elements,{options:c,stripe:d,children:o})})}},41710:(e,s,i)=>{"use strict";i.d(s,{default:()=>B});var l=i(95155),t=i(34477);let a=(0,t.createServerReference)("60eb2c92d233043215255543c2ca77a6e7ef65f93c",t.callServer,void 0,t.findSourceMapURL,"setAddresses");var n=i(60245),r=i.n(n),d=i(41998),o=i.n(d);function c(e,s){return r()(o()(e,["first_name","last_name","address_1","company","postal_code","city","country_code","province","phone"]),o()(s,["first_name","last_name","address_1","company","postal_code","city","country_code","province","phone"]))}var u=i(36873),m=i(93290),p=i(43184),h=i(24084),v=i(47732),x=i(68609),g=i(35695),b=i(12115),f=i(7634),_=i(99019);let j=e=>{var s,i,t,a,n,r,d,o,c;let{cart:u}=e,[m,p]=(0,b.useState)({"billing_address.first_name":(null==u||null==(s=u.billing_address)?void 0:s.first_name)||"","billing_address.last_name":(null==u||null==(i=u.billing_address)?void 0:i.last_name)||"","billing_address.address_1":(null==u||null==(t=u.billing_address)?void 0:t.address_1)||"","billing_address.company":(null==u||null==(a=u.billing_address)?void 0:a.company)||"","billing_address.postal_code":(null==u||null==(n=u.billing_address)?void 0:n.postal_code)||"","billing_address.city":(null==u||null==(r=u.billing_address)?void 0:r.city)||"","billing_address.country_code":(null==u||null==(d=u.billing_address)?void 0:d.country_code)||"","billing_address.province":(null==u||null==(o=u.billing_address)?void 0:o.province)||"","billing_address.phone":(null==u||null==(c=u.billing_address)?void 0:c.phone)||""}),h=e=>{p({...m,[e.target.name]:e.target.value})};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsx)(f.A,{label:"First name",name:"billing_address.first_name",autoComplete:"given-name",value:m["billing_address.first_name"],onChange:h,required:!0,"data-testid":"billing-first-name-input"}),(0,l.jsx)(f.A,{label:"Last name",name:"billing_address.last_name",autoComplete:"family-name",value:m["billing_address.last_name"],onChange:h,required:!0,"data-testid":"billing-last-name-input"}),(0,l.jsx)(f.A,{label:"Address",name:"billing_address.address_1",autoComplete:"address-line1",value:m["billing_address.address_1"],onChange:h,required:!0,"data-testid":"billing-address-input"}),(0,l.jsx)(f.A,{label:"Company",name:"billing_address.company",value:m["billing_address.company"],onChange:h,autoComplete:"organization","data-testid":"billing-company-input"}),(0,l.jsx)(f.A,{label:"Postal code",name:"billing_address.postal_code",autoComplete:"postal-code",value:m["billing_address.postal_code"],onChange:h,required:!0,"data-testid":"billing-postal-input"}),(0,l.jsx)(f.A,{label:"City",name:"billing_address.city",autoComplete:"address-level2",value:m["billing_address.city"],onChange:h}),(0,l.jsx)(_.A,{name:"billing_address.country_code",autoComplete:"country",region:null==u?void 0:u.region,value:m["billing_address.country_code"],onChange:h,required:!0,"data-testid":"billing-country-select"}),(0,l.jsx)(f.A,{label:"State / Province",name:"billing_address.province",autoComplete:"address-level1",value:m["billing_address.province"],onChange:h,"data-testid":"billing-province-input"}),(0,l.jsx)(f.A,{label:"Phone",name:"billing_address.phone",autoComplete:"tel",value:m["billing_address.phone"],onChange:h,"data-testid":"billing-phone-input"})]})})};var y=i(79010),N=i(53592),w=i(78788),C=i(43820);let P=e=>{let{checked:s=!0,onChange:i,label:t,name:a,"data-testid":n}=e;return(0,l.jsxs)("div",{className:"flex items-center space-x-2 ",children:[(0,l.jsx)(w.Checkbox,{className:"text-base-regular flex items-center gap-x-2",id:"checkbox",role:"checkbox",type:"button",checked:s,"aria-checked":s,onClick:i,name:a,"data-testid":n}),(0,l.jsx)(C.Label,{htmlFor:"checkbox",className:"!transform-none !txt-medium",size:"large",children:t})]})};var k=i(12819),E=i.n(k),S=i(48222),A=i(4772),z=i(314),L=i(33881),M=i(47698);let R=e=>{let{addresses:s,addressInput:i,onSelect:t}=e,a=(0,b.useMemo)(()=>s.find(e=>c(e,i)),[s,i]);return(0,l.jsx)(S.WF,{onChange:e=>{let i=s.find(s=>s.id===e);i&&t(i)},value:null==a?void 0:a.id,children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(S.WF.Button,{className:"relative w-full flex justify-between items-center px-4 py-[10px] text-left bg-white cursor-default focus:outline-none border rounded-rounded focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-gray-300 focus-visible:ring-offset-2 focus-visible:border-gray-300 text-base-regular","data-testid":"shipping-address-select",children:e=>{let{open:s}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"block truncate",children:a?a.address_1:"Choose an address"}),(0,l.jsx)(z.A,{className:(0,L.E)("transition-rotate duration-200",{"transform rotate-180":s})})]})}}),(0,l.jsx)(A.e,{as:b.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,l.jsx)(S.WF.Options,{className:"absolute z-20 w-full overflow-auto text-small-regular bg-white border border-top-0 max-h-60 focus:outline-none sm:text-sm","data-testid":"shipping-address-options",children:s.map(e=>{var s;return(0,l.jsx)(S.WF.Option,{value:e.id,className:"cursor-default select-none relative pl-6 pr-10 hover:bg-gray-50 py-4","data-testid":"shipping-address-option",children:(0,l.jsxs)("div",{className:"flex gap-x-4 items-start",children:[(0,l.jsx)(M.A,{checked:(null==a?void 0:a.id)===e.id,"data-testid":"shipping-address-radio"}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsxs)("span",{className:"text-left text-base-semi",children:[e.first_name," ",e.last_name]}),e.company&&(0,l.jsx)("span",{className:"text-small-regular text-ui-fg-base",children:e.company}),(0,l.jsxs)("div",{className:"flex flex-col text-left text-base-regular mt-2",children:[(0,l.jsxs)("span",{children:[e.address_1,e.address_2&&(0,l.jsxs)("span",{children:[", ",e.address_2]})]}),(0,l.jsxs)("span",{children:[e.postal_code,", ",e.city]}),(0,l.jsxs)("span",{children:[e.province&&"".concat(e.province,", "),null==(s=e.country_code)?void 0:s.toUpperCase()]})]})]})]})},e.id)})})})]})})},F=e=>{var s,i,t,a,n,r,d,o,c;let{customer:u,cart:m,checked:p,onChange:h}=e,[v,x]=(0,b.useState)({"shipping_address.first_name":(null==m||null==(s=m.shipping_address)?void 0:s.first_name)||"","shipping_address.last_name":(null==m||null==(i=m.shipping_address)?void 0:i.last_name)||"","shipping_address.address_1":(null==m||null==(t=m.shipping_address)?void 0:t.address_1)||"","shipping_address.company":(null==m||null==(a=m.shipping_address)?void 0:a.company)||"","shipping_address.postal_code":(null==m||null==(n=m.shipping_address)?void 0:n.postal_code)||"","shipping_address.city":(null==m||null==(r=m.shipping_address)?void 0:r.city)||"","shipping_address.country_code":(null==m||null==(d=m.shipping_address)?void 0:d.country_code)||"","shipping_address.province":(null==m||null==(o=m.shipping_address)?void 0:o.province)||"","shipping_address.phone":(null==m||null==(c=m.shipping_address)?void 0:c.phone)||"",email:(null==m?void 0:m.email)||""}),g=(0,b.useMemo)(()=>{var e,s;return null==m||null==(s=m.region)||null==(e=s.countries)?void 0:e.map(e=>e.iso_2)},[null==m?void 0:m.region]),j=(0,b.useMemo)(()=>null==u?void 0:u.addresses.filter(e=>e.country_code&&(null==g?void 0:g.includes(e.country_code))),[null==u?void 0:u.addresses,g]),y=(e,s)=>{e&&x(s=>({...s,"shipping_address.first_name":(null==e?void 0:e.first_name)||"","shipping_address.last_name":(null==e?void 0:e.last_name)||"","shipping_address.address_1":(null==e?void 0:e.address_1)||"","shipping_address.company":(null==e?void 0:e.company)||"","shipping_address.postal_code":(null==e?void 0:e.postal_code)||"","shipping_address.city":(null==e?void 0:e.city)||"","shipping_address.country_code":(null==e?void 0:e.country_code)||"","shipping_address.province":(null==e?void 0:e.province)||"","shipping_address.phone":(null==e?void 0:e.phone)||""})),s&&x(e=>({...e,email:s}))};(0,b.useEffect)(()=>{m&&m.shipping_address&&y(null==m?void 0:m.shipping_address,null==m?void 0:m.email),m&&!m.email&&(null==u?void 0:u.email)&&y(void 0,u.email)},[m]);let w=e=>{x({...v,[e.target.name]:e.target.value})};return(0,l.jsxs)(l.Fragment,{children:[u&&((null==j?void 0:j.length)||0)>0&&(0,l.jsxs)(N.m,{className:"mb-6 flex flex-col gap-y-4 p-5",children:[(0,l.jsx)("p",{className:"text-small-regular",children:"Hi ".concat(u.first_name,", do you want to use one of your saved addresses?")}),(0,l.jsx)(R,{addresses:u.addresses,addressInput:E()(v,(e,s)=>s.replace("shipping_address.","")),onSelect:y})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsx)(f.A,{label:"First name",name:"shipping_address.first_name",autoComplete:"given-name",value:v["shipping_address.first_name"],onChange:w,required:!0,"data-testid":"shipping-first-name-input"}),(0,l.jsx)(f.A,{label:"Last name",name:"shipping_address.last_name",autoComplete:"family-name",value:v["shipping_address.last_name"],onChange:w,required:!0,"data-testid":"shipping-last-name-input"}),(0,l.jsx)(f.A,{label:"Address",name:"shipping_address.address_1",autoComplete:"address-line1",value:v["shipping_address.address_1"],onChange:w,required:!0,"data-testid":"shipping-address-input"}),(0,l.jsx)(f.A,{label:"Company",name:"shipping_address.company",value:v["shipping_address.company"],onChange:w,autoComplete:"organization","data-testid":"shipping-company-input"}),(0,l.jsx)(f.A,{label:"Postal code",name:"shipping_address.postal_code",autoComplete:"postal-code",value:v["shipping_address.postal_code"],onChange:w,required:!0,"data-testid":"shipping-postal-code-input"}),(0,l.jsx)(f.A,{label:"City",name:"shipping_address.city",autoComplete:"address-level2",value:v["shipping_address.city"],onChange:w,required:!0,"data-testid":"shipping-city-input"}),(0,l.jsx)(_.A,{name:"shipping_address.country_code",autoComplete:"country",region:null==m?void 0:m.region,value:v["shipping_address.country_code"],onChange:w,required:!0,"data-testid":"shipping-country-select"}),(0,l.jsx)(f.A,{label:"State / Province",name:"shipping_address.province",autoComplete:"address-level1",value:v["shipping_address.province"],onChange:w,"data-testid":"shipping-province-input"})]}),(0,l.jsx)("div",{className:"my-8",children:(0,l.jsx)(P,{label:"Billing address same as shipping address",name:"same_as_billing",checked:p,onChange:h,"data-testid":"billing-address-checkbox"})}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,l.jsx)(f.A,{label:"Email",name:"email",type:"email",title:"Enter a valid email address.",autoComplete:"email",value:v.email,onChange:w,required:!0,"data-testid":"shipping-email-input"}),(0,l.jsx)(f.A,{label:"Phone",name:"shipping_address.phone",autoComplete:"tel",value:v["shipping_address.phone"],onChange:w,"data-testid":"shipping-phone-input"})]})]})};var I=i(3875);let B=e=>{var s,i,t,n,r,d,o,f,_;let{cart:N,customer:w}=e,C=(0,g.useSearchParams)(),P=(0,g.useRouter)(),k=(0,g.usePathname)(),E="address"===C.get("step"),{state:S,toggle:A}=(0,m.useToggleState)(null==N||!N.shipping_address||null==N||!N.billing_address||c(null==N?void 0:N.shipping_address,null==N?void 0:N.billing_address)),[z,L]=(0,b.useActionState)(a,null);return(0,l.jsxs)("div",{className:"bg-white",children:[(0,l.jsxs)("div",{className:"flex flex-row items-center justify-between mb-6",children:[(0,l.jsxs)(p.D,{level:"h2",className:"flex flex-row text-3xl-regular gap-x-2 items-baseline",children:["Shipping Address",!E&&(0,l.jsx)(u.A,{})]}),!E&&(null==N?void 0:N.shipping_address)&&(0,l.jsx)(h.E,{children:(0,l.jsx)("button",{onClick:()=>{P.push(k+"?step=address")},className:"text-ui-fg-interactive hover:text-ui-fg-interactive-hover","data-testid":"edit-address-button",children:"Edit"})})]}),E?(0,l.jsx)("form",{action:L,children:(0,l.jsxs)("div",{className:"pb-8",children:[(0,l.jsx)(F,{customer:w,checked:S,onChange:A,cart:N}),!S&&(0,l.jsxs)("div",{children:[(0,l.jsx)(p.D,{level:"h2",className:"text-3xl-regular gap-x-4 pb-6 pt-8",children:"Billing address"}),(0,l.jsx)(j,{cart:N})]}),(0,l.jsx)(I.b,{className:"mt-6","data-testid":"submit-address-button",children:"Continue to delivery"}),(0,l.jsx)(y.A,{error:z,"data-testid":"address-error-message"})]})}):(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"text-small-regular",children:N&&N.shipping_address?(0,l.jsx)("div",{className:"flex items-start gap-x-8",children:(0,l.jsxs)("div",{className:"flex items-start gap-x-1 w-full",children:[(0,l.jsxs)("div",{className:"flex flex-col w-1/3","data-testid":"shipping-address-summary",children:[(0,l.jsx)(h.E,{className:"txt-medium-plus text-ui-fg-base mb-1",children:"Shipping Address"}),(0,l.jsxs)(h.E,{className:"txt-medium text-ui-fg-subtle",children:[N.shipping_address.first_name," ",N.shipping_address.last_name]}),(0,l.jsxs)(h.E,{className:"txt-medium text-ui-fg-subtle",children:[N.shipping_address.address_1," ",N.shipping_address.address_2]}),(0,l.jsxs)(h.E,{className:"txt-medium text-ui-fg-subtle",children:[N.shipping_address.postal_code,","," ",N.shipping_address.city]}),(0,l.jsx)(h.E,{className:"txt-medium text-ui-fg-subtle",children:null==(s=N.shipping_address.country_code)?void 0:s.toUpperCase()})]}),(0,l.jsxs)("div",{className:"flex flex-col w-1/3 ","data-testid":"shipping-contact-summary",children:[(0,l.jsx)(h.E,{className:"txt-medium-plus text-ui-fg-base mb-1",children:"Contact"}),(0,l.jsx)(h.E,{className:"txt-medium text-ui-fg-subtle",children:N.shipping_address.phone}),(0,l.jsx)(h.E,{className:"txt-medium text-ui-fg-subtle",children:N.email})]}),(0,l.jsxs)("div",{className:"flex flex-col w-1/3","data-testid":"billing-address-summary",children:[(0,l.jsx)(h.E,{className:"txt-medium-plus text-ui-fg-base mb-1",children:"Billing Address"}),S?(0,l.jsx)(h.E,{className:"txt-medium text-ui-fg-subtle",children:"Billing- and delivery address are the same."}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(h.E,{className:"txt-medium text-ui-fg-subtle",children:[null==(i=N.billing_address)?void 0:i.first_name," ",null==(t=N.billing_address)?void 0:t.last_name]}),(0,l.jsxs)(h.E,{className:"txt-medium text-ui-fg-subtle",children:[null==(n=N.billing_address)?void 0:n.address_1," ",null==(r=N.billing_address)?void 0:r.address_2]}),(0,l.jsxs)(h.E,{className:"txt-medium text-ui-fg-subtle",children:[null==(d=N.billing_address)?void 0:d.postal_code,","," ",null==(o=N.billing_address)?void 0:o.city]}),(0,l.jsx)(h.E,{className:"txt-medium text-ui-fg-subtle",children:null==(_=N.billing_address)||null==(f=_.country_code)?void 0:f.toUpperCase()})]})]})]})}):(0,l.jsx)("div",{children:(0,l.jsx)(x.A,{})})})}),(0,l.jsx)(v.A,{className:"mt-8"})]})}},47698:(e,s,i)=>{"use strict";i.d(s,{A:()=>t});var l=i(95155);let t=e=>{let{checked:s,"data-testid":i}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("button",{type:"button",role:"radio","aria-checked":"true","data-state":s?"checked":"unchecked",className:"group relative flex h-5 w-5 items-center justify-center outline-none","data-testid":i||"radio-button",children:(0,l.jsx)("div",{className:"shadow-borders-base group-hover:shadow-borders-strong-with-shadow bg-ui-bg-base group-data-[state=checked]:bg-ui-bg-interactive group-data-[state=checked]:shadow-borders-interactive group-focus:!shadow-borders-interactive-with-focus group-disabled:!bg-ui-bg-disabled group-disabled:!shadow-borders-base flex h-[14px] w-[14px] items-center justify-center rounded-full transition-all",children:s&&(0,l.jsx)("span",{"data-state":s?"checked":"unchecked",className:"group flex items-center justify-center",children:(0,l.jsx)("div",{className:"bg-ui-bg-base shadow-details-contrast-on-bg-interactive group-disabled:bg-ui-fg-disabled rounded-full group-disabled:shadow-none h-1.5 w-1.5"})})})})})}},53753:(e,s,i)=>{"use strict";i.d(s,{A:()=>l});let l=e=>Array.from(Array(e).keys())},65485:(e,s,i)=>{"use strict";i.d(s,{A:()=>d});var l=i(95155),t=i(314),a=i(33881),n=i(12115);let r=(0,n.forwardRef)((e,s)=>{var i;let{placeholder:r="Select...",defaultValue:d,className:o,children:c,...u}=e,m=(0,n.useRef)(null),[p,h]=(0,n.useState)(!1);return(0,n.useImperativeHandle)(s,()=>m.current),(0,n.useEffect)(()=>{m.current&&""===m.current.value?h(!0):h(!1)},[null==(i=m.current)?void 0:i.value]),(0,l.jsx)("div",{children:(0,l.jsxs)("div",{onFocus:()=>{var e;return null==(e=m.current)?void 0:e.focus()},onBlur:()=>{var e;return null==(e=m.current)?void 0:e.blur()},className:(0,a.E)("relative flex items-center text-base-regular border border-ui-border-base bg-ui-bg-subtle rounded-md hover:bg-ui-bg-field-hover",o,{"text-ui-fg-muted":p}),children:[(0,l.jsxs)("select",{ref:m,defaultValue:d,...u,className:"appearance-none flex-1 bg-transparent border-none px-4 py-2.5 transition-colors duration-150 outline-none ",children:[(0,l.jsx)("option",{disabled:!0,value:"",children:r}),c]}),(0,l.jsx)("span",{className:"absolute right-4 inset-y-0 flex items-center pointer-events-none ",children:(0,l.jsx)(t.A,{})})]})})});r.displayName="NativeSelect";let d=r},74718:(e,s,i)=>{"use strict";i.d(s,{default:()=>n});var l=i(95155);i(51978),i(12115);var t=i(32307),a=i(27467);let n=e=>{var s,i;let{cart:t,children:n}=e,r=null==(i=t.payment_collection)||null==(s=i.payment_sessions)?void 0:s.find(e=>"pending"===e.status);return(0,a.Ce)(null==r?void 0:r.provider_id)&&r,(0,l.jsx)("div",{children:n})}},91995:(e,s,i)=>{"use strict";i.d(s,{default:()=>b});var l=i(95155),t=i(43184),a=i(33881),n=i(24084),r=i(27467),d=i(34477);let o=(0,d.createServerReference)("4069cb33efe6c9b095947954f3e47306f17b91443b",d.callServer,void 0,d.findSourceMapURL,"placeOrder");var c=i(54630),u=i(55855),m=i(12115),p=i(79010);let h=e=>{var s,i;let{cart:t,notReady:a,"data-testid":n}=e,[r,d]=(0,m.useState)(!1),[h,v]=(0,m.useState)(null),x=async()=>{await o().catch(e=>{v(e.message)}).finally(()=>{d(!1)})},g=(0,u.useStripe)(),b=(0,u.useElements)(),f=null==b?void 0:b.getElement("card"),_=null==(i=t.payment_collection)||null==(s=i.payment_sessions)?void 0:s.find(e=>"pending"===e.status),j=!g||!b,y=async()=>{var e,s,i,l,a,n,r,o,c,u,m,p,h,j,y,N;if(d(!0),!g||!b||!f||!t)return void d(!1);await g.confirmCardPayment(null==_?void 0:_.data.client_secret,{payment_method:{card:f,billing_details:{name:(null==(e=t.billing_address)?void 0:e.first_name)+" "+(null==(s=t.billing_address)?void 0:s.last_name),address:{city:null!=(u=null==(i=t.billing_address)?void 0:i.city)?u:void 0,country:null!=(m=null==(l=t.billing_address)?void 0:l.country_code)?m:void 0,line1:null!=(p=null==(a=t.billing_address)?void 0:a.address_1)?p:void 0,line2:null!=(h=null==(n=t.billing_address)?void 0:n.address_2)?h:void 0,postal_code:null!=(j=null==(r=t.billing_address)?void 0:r.postal_code)?j:void 0,state:null!=(y=null==(o=t.billing_address)?void 0:o.province)?y:void 0},email:t.email,phone:null!=(N=null==(c=t.billing_address)?void 0:c.phone)?N:void 0}}}).then(e=>{let{error:s,paymentIntent:i}=e;if(s){let e=s.payment_intent;(e&&"requires_capture"===e.status||e&&"succeeded"===e.status)&&x(),v(s.message||null);return}if(i&&"requires_capture"===i.status||"succeeded"===i.status)return x()})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.$,{disabled:j||a,onClick:y,size:"large",isLoading:r,"data-testid":n,children:"Place order"}),(0,l.jsx)(p.A,{error:h,"data-testid":"stripe-payment-error-message"})]})},v=e=>{let{notReady:s}=e,[i,t]=(0,m.useState)(!1),[a,n]=(0,m.useState)(null),r=async()=>{await o().catch(e=>{n(e.message)}).finally(()=>{t(!1)})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.$,{disabled:s,isLoading:i,onClick:()=>{t(!0),r()},size:"large","data-testid":"submit-order-button",children:"Place order"}),(0,l.jsx)(p.A,{error:a,"data-testid":"manual-payment-error-message"})]})},x=e=>{var s,i,t,a;let{cart:n,"data-testid":d}=e,o=!n||!n.shipping_address||!n.billing_address||!n.email||(null!=(a=null==(s=n.shipping_methods)?void 0:s.length)?a:0)<1,u=null==(t=n.payment_collection)||null==(i=t.payment_sessions)?void 0:i[0];switch(!0){case(0,r.Ce)(null==u?void 0:u.provider_id):return(0,l.jsx)(h,{notReady:o,cart:n,"data-testid":d});case(0,r.b0)(null==u?void 0:u.provider_id):return(0,l.jsx)(v,{notReady:o,"data-testid":d});default:return(0,l.jsx)(c.$,{disabled:!0,children:"Select a payment method"})}};var g=i(35695);let b=e=>{var s;let{cart:i}=e,r="review"===(0,g.useSearchParams)().get("step"),d=(null==i?void 0:i.gift_cards)&&(null==i||null==(s=i.gift_cards)?void 0:s.length)>0&&(null==i?void 0:i.total)===0,o=i.shipping_address&&i.shipping_methods.length>0&&(i.payment_collection||d);return(0,l.jsxs)("div",{className:"bg-white",children:[(0,l.jsx)("div",{className:"flex flex-row items-center justify-between mb-6",children:(0,l.jsx)(t.D,{level:"h2",className:(0,a.E)("flex flex-row text-3xl-regular gap-x-2 items-baseline",{"opacity-50 pointer-events-none select-none":!r}),children:"Review"})}),r&&o&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"flex items-start gap-x-1 w-full mb-6",children:(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)(n.E,{className:"txt-medium-plus text-ui-fg-base mb-1",children:"By clicking the Place Order button, you confirm that you have read, understand and accept our Terms of Use, Terms of Sale and Returns Policy and acknowledge that you have read Medusa Store's Privacy Policy."})})}),(0,l.jsx)(x,{cart:i,"data-testid":"submit-order-button"})]})]})}},96554:(e,s,i)=>{"use strict";i.d(s,{A:()=>a});var l=i(95155),t=i(94539);let a=()=>(0,l.jsxs)(t.X.Row,{className:"w-full m-4",children:[(0,l.jsx)(t.X.Cell,{className:"p-4 w-24",children:(0,l.jsx)("div",{className:"flex w-24 h-24 p-4 bg-gray-200 animate-pulse"})}),(0,l.jsx)(t.X.Cell,{className:"text-left",children:(0,l.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,l.jsx)("div",{className:"w-32 h-4 bg-gray-200 animate-pulse"}),(0,l.jsx)("div",{className:"w-24 h-4 bg-gray-200 animate-pulse"})]})}),(0,l.jsx)(t.X.Cell,{children:(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,l.jsx)("div",{className:"w-6 h-8 bg-gray-200 animate-pulse"}),(0,l.jsx)("div",{className:"w-14 h-10 bg-gray-200 animate-pulse"})]})}),(0,l.jsx)(t.X.Cell,{children:(0,l.jsx)("div",{className:"flex gap-2",children:(0,l.jsx)("div",{className:"w-12 h-6 bg-gray-200 animate-pulse"})})}),(0,l.jsx)(t.X.Cell,{children:(0,l.jsx)("div",{className:"flex gap-2 justify-end",children:(0,l.jsx)("div",{className:"w-12 h-6 bg-gray-200 animate-pulse"})})})]})},99019:(e,s,i)=>{"use strict";i.d(s,{A:()=>r});var l=i(95155),t=i(12115),a=i(65485);let n=(0,t.forwardRef)((e,s)=>{let{placeholder:i="Country",region:n,defaultValue:r,...d}=e,o=(0,t.useRef)(null);(0,t.useImperativeHandle)(s,()=>o.current);let c=(0,t.useMemo)(()=>{var e;return n?null==(e=n.countries)?void 0:e.map(e=>({value:e.iso_2,label:e.display_name})):[]},[n]);return(0,l.jsx)(a.A,{ref:o,placeholder:i,defaultValue:r,...d,children:null==c?void 0:c.map((e,s)=>{let{value:i,label:t}=e;return(0,l.jsx)("option",{value:i,children:t},s)})})});n.displayName="CountrySelect";let r=n}},e=>{e.O(0,[2545,4630,5784,8779,6874,1597,1623,6842,9306,245,711,9999,8441,5964,7358],()=>e(e.s=17822)),_N_E=e.O()}]);